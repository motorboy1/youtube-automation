​

## 📌 노션과 n8n을 활용한 교재 제작 자동화는 어떻게 이루어지나요?
 노션 AI로 영어 단어 데이터베이스를 구축하고, n8n 자동화 툴을 이용해 이미지, 오디오, qr 코드, 플립카드 슬라이드 등 영어 교육<mark> 콘텐츠를 자동으로 생성하고 </mark>노션<mark>에 임베드</mark>하는 방식으로 이루어집니다. 


## 💡 n8n을 활용한 자동화 과정의 핵심 단계는 무엇인가요?

- 노션 AI로 영어 단어 및 의미 데이터베이스 생성
- 플럭스(Plex) API를 이용한 단어별 이미지 자동 생성 및 S3 업로드
- 무료 TTS를 활용한 단어 오디오 자동 생성
- 생성된 이미지, 오디오, 단어를 활용하여 플립카드 콘텐츠 자동 생성 및 노션 블록에 임베드
- 생성 완료된 단어의 상태를 '생성 완료'로 업데이트 및 이미지/오디오 URL 기록

노션(Notion)과 강력한 자동화 도구인 **n8n**을 결합하여 **영어 교육**** 콘텐츠를 자동으로 생성**하는 놀라운 실무 사례를 공개합니다. 이미지 생성, 오디오 tts, qr 코드 생성, 그리고 노션 데이터베이스 연동까지 모든 과정을 워크플로우로 구현하는 방법을 상세히 보여줍니다. 교육 콘텐츠 제작에 드는 **반복적인 수작업과 시간을 획기적으로 줄이고** 싶다면, 이 영상을 통해 **자동화****된 교재 제작 시스템**을 구축하는 구체적인 기술과 인사이트를 얻을 수 있습니다.
## 1. 자동화된 영어 교육 콘텐츠 제작 사례 소개 및 시연 
![image]()
1. **자동화**** 사례 소개 배경**:
  1. 영어 교육 콘텐츠 제작 시 필요한 많은 노력과 반복적인 수작업을 줄이고, 콘텐츠를 자동으로 만들어냄으로써 교육 효율을 높일 수 있다 .
  2. 본 영상은 최근 의뢰받았던 영어 교육 콘텐츠 자동화 사례를 시연을 통해 소개하며, 시청자들이 직접 무료로 만들 수 있는 과정을 공유하고자 한다 .

2. **사이트 워드 제너레이터 시연**:
  1. 제작된 '사이트 워드 제너레이터'는 초등학생이나 아동 학습에 필요한 영어 단어들을 콘텐츠 형태로 제공한다 .
  2. 이 콘텐츠는 플립카드(Flip Card) 형태의 동적인 효과와 오디오를 포함하며, 이 모든 요소(이미지 찾기, 어구 문제, 비율 등)가 자동으로 생성된다 .
  3. 시연자는 이미 여섯 가지 사이트 워드를 만들었으며, 슬라이드 이미지까지 자동으로 생성 가능하다 .
  4. **자동 생성 과정 시연**:
  1. 단어 카테고리 및 카드 색상까지 데이터베이스에 준비해 둔다 .
  2. 생성하고자 하는 단어를 선택하고 상태를 변경한 후, '학습자료 생성' 버튼을 누르면 새로운 콘텐츠가 자동으로 생성된다 .
  3. 생성 결과, 썸네일 이미지, 원하는 텍스트, 플립카드가 자동으로 생성되는 것을 확인할 수 있다 .
  4. 놀랍게도 **QR 코드**까지 자동으로 생성되어, 출력물로 교육생에게 제공하면 웹사이트에 접속하여 오디오를 듣고 학습할 수 있다 .

3. **자동화**** 도구 소개**:
  1. 이러한 콘텐츠는 노션(Notion)으로 만들 수 있지만, 노션만으로는 어렵고 **자동화****된 툴**을 결합해야 한다 .
  2. 활용된 자동화 도구는 **n8n**이며, 이는 메이크(Make)와 유사하게 모든 API를 통합하여 자동화를 수행할 수 있는 툴이다 .
  3. n8n 워크플로우 화면에는 이미지 생성, 오디오 TTS, QR 코드 생성, 슬라이드 자동 생성을 구현한 노드들이 배열되어 있다 .


## 2. 노션 데이터베이스 구축 및 설정 


### 2.1. 영단어 DB 및 블록 정보 DB 구축 
![image](https://resource-release.s3.ap-northeast-2.amazonaws.com/thumbnails/0fvXBIi6cyk/293.jpg)
1. **영어 단어 생성 (****노션**** AI 활용)**:
  1. 노션 AI 유료 기능을 사용하여 프롬프트를 입력한다 .
  2. **프롬프트**** 내용**: 초등생 영어 교육 기초 과정에 필요한 사이트 워드를 생성하며, 특정 주제(의류와 잡화)와 관련된 사물, 환경, 개념 등의 사이트 워드를 표로 생성하고 의미 필드를 만들도록 요청한다 .
  3. 생성된 표의 첫 행을 제목 행으로 만들고 데이터베이스로 전환하여 **영단어 DB**로 활용한다 .

2. **필수 속성 추가**:
  1. **이미지 필드**: 이미지 자동 생성을 위해 '파일과 미디어' 속성으로 이미지 필드를 만든다 .
  2. **오디오 필드**: 오디오 생성을 위해 동일하게 '파일과 미디어' 속성으로 오디오 필드를 만든다 .

3. **블록 정보 DB 구축**:
  1. 영어 단어들이 입력될 블록(카드)이 필요하므로, 3열 블록을 만들어 3열 3행으로 총 9개의 카드가 들어갈 블록들을 사전에 만든다 .
  2. 만들어진 블록들의 **블록 아이디**를 알아내기 위해 각 블록의 링크를 복사하여 코드 블록에 정리한다 .
  3. 정리된 링크에서 뒷부분의 블록 아이디를 추출하여 표로 만들고, 이를 **블록 정보 DB**로 전환한다 .
  4. 영단어 DB와 블록 정보 DB를 연결하기 위해 영단어 DB에 **관계형 속성**을 추가하고, 블록 정보 DB를 가리키도록 설정하며, 선택 제한을 한 개씩만 가능하도록 관계를 추가한다 .
  5. 이후 단어가 들어갈 블록을 하나씩 지정해 준다 .


### 2.2. 자동화 상태 및 롤업, 버튼 설정 
![image]()
1. **생성 요청 상태 필드 설정**:
  1. 생성을 요청할 단어를 선택하기 위해 **상태 속성**을 활용한다 .
  2. 기본으로 생성된 값 중 '진행 중'을 삭제하고, '시작 전'을 **생성 전**으로, '완료'를 **생성 완료**로 이름을 변경한다 .
  3. 기본 상태를 '생성 완료'로 설정하여, 생성하고자 하는 단어만 '생성 전'으로 변경하는 방식으로 진행한다 .

2. **롤업 필드**** 설정**:
  1. 블록 정보를 연결하는 것 외에 **블록 아이디**** 값**을 가져와야 하므로 **롤업 필드**를 추가한다 .
  2. 관계형으로 연결된 블록 정보에서 속성으로 '블록 아이디'를 선택하여 블록 아이디를 불러오도록 설정한다 .

3. **단어 카드 생성 버튼 설정**:
  1. 노션 맨 위에 **단어 카드 생성 버튼**을 만든다 .
  2. 이 버튼을 눌렀을 때 작동할 작업으로 **웹 훅(Web Hook) 보내기**를 지정한다 .
  3. n8n에서 받아온 웹훅 주소를 입력하고 완료한다 (초기에는 더미 주소 입력) .


## 3. n8n 워크플로우 구축: 데이터 조회 및 분리 
![image]()
1. **n8n**** 환경 설정**:
  1. n8n 화면에서 새로운 워크플로우를 생성하여 시작한다 .
  2. 첫 번째 노드로 **트리거 매뉴얼(Trigger Manual)** 노드를 선택하여 수동 실행이 가능하도록 한다 .

2. **영단어 DB 조회 (HTTP Request)**:
  1. 노션 데이터를 불러오기 위해 **HTTP Request** 노드를 선택한다 (노션 기본 액션은 정보 가져오기에 제한적이기 때문) .
  2. 노드 이름을 '영단어 DB 조회'로 변경하고, 데이터를 가져올 때 **POST 메서드**를 선택한다 .
  3. **URL 설정**: 노션 데이터베이스 레코드를 가져오는 URL 주소를 입력하며, 주소 내에 데이터베이스 아이디를 포함시킨다 .
  1. 데이터베이스 아이디는 노션 DB의 '보기 링크 복사'를 통해 확인하고, 물음표 전까지의 아이디 부분을 복사하여 URL에 입력한다 .
  4. **인증키 설정 (Authentication)**: 노션 API 인증키를 입력해야 하며, 'Predefined Credential Type'을 선택하고 노션을 검색하여 인증키를 설정한다 .
  5. **요청 본문 설정 (Request Body)**:
  1. 'Send Body'를 체크하고 'Using JSON'으로 변경한다 .
  2. 요청 바디에 필터 조건을 설정하여, 상태가 **'생성 전'**인 데이터만 가져오도록 요청 본문을 작성한다 .
  6. **테스트**: 테스트 결과, '생성 전' 상태인 9개의 데이터가 테이블 형태로 잘 가져와지는 것을 확인한다 .

3. **데이터 분리 및 ****루프**** 처리**:
  1. 가져온 데이터를 기반으로 이미지와 오디오를 하나씩 만들기 위해 **Split Out** 노드를 선택한다 .
  2. n8n의 **핀(Pin) 기능**을 이용하여 데이터를 계속 호출하지 않고 기존 데이터를 활용하도록 고정한다 .
  3. Split Out 노드에 리절트(Result) 배열을 넣어 테스트하면, 총 9개의 아이템으로 분리된다 .
  4. 다음으로 **Loop Over Items** 노드를 실행하여 9개의 아이템을 하나씩 순회하며 처리할 수 있도록 준비한다 .


## 4. n8n 워크플로우 구축: 이미지 및 오디오 생성 


### 4.1. 플럭스 이미지 생성 및 다운로드 
![image]()
1. **플럭스 ****이미지 생성**** (HTTP Request)**:
  1. 이미지 생성을 위해 **플럭스 슈넬 모델**을 사용하며, 이는 **리플리케이트 API**를 통해 사용 가능하다 .
  2. HTTP Request 노드를 다시 만들어 POST로 설정하고 이름을 '플럭스 이미지 생성'으로 지정한다 .
  3. **URL 설정**: 리플리케이트 API를 사용하는 URL을 붙여 넣고, 모델을 'black-press-labs/schneel'로 지정한다 .
  4. **인증키 설정**: 'Generic Credential Type'을 선택하고 헤더(Header)를 찾아 리플리케이트 API 키를 설정한다 .
  1. API 키 입력 시, 네임에 'Authorization'을 입력하고, 밸류에 **'Bearer [토큰]'** 형태로 입력해야 한다 .
  5. **요청 본문 설정**: 'Using JSON'으로 설정하고, 프롬프트, 이미지 개수(1개), 비율(1:1), 퀄리티(80) 등을 지정하는 요청 본문을 입력한다 .
  6. **대기 설정**: 이미지가 생성되는 동안 응답을 기다리기 위해 헤더 부분에 'Prefer' 필드와 'wait' 값을 추가 설정한다 .
  7. **프롬프트**** 변수화**: 루프를 돌면서 가져온 영단어 사물 이미지로 생성해야 하므로, 프롬프트에 단어만 넣는 것이 아니라, 사전에 준비된 **제품 사진처럼 잘 나올 수 있도록 안내하는 ****프롬프트**를 사용한다 .
  1. 프롬프트 내의 '단어 입력' 부분에 이전 노드(Loop Over Items)에서 가져온 **단어 속성**을 변수로 넣어준다 .
  8. **테스트**: 테스트 결과, 벨트 이미지가 잘 생성되고 아웃풋 URL 주소가 나오는 것을 확인한다 .

2. **바이너리 파일 다운로드 (HTTP Request)**:
  1. 생성된 이미지를 바이너리 파일로 다운로드하기 위해 HTTP Request 노드를 사용하고 **GET 메서드**를 선택한다 .
  2. 이전 노드에서 나온 아웃풋 URL 주소를 URL에 넣어주고, 노드 이름을 '파일 다운로드'로 변경한다 .
  3. 테스트 결과, 이미지가 다운로드되어 보여지는 것을 확인한다 .

3. **S3**** 업로드 및 URL 확보 (****S3**** Node)**:
  1. 다운로드된 파일을 S3에 업로드해야 웹 주소를 확보할 수 있으므로 S3 노드를 활용한다 .
  2. 액션에서 'Upload File'을 선택하고, 준비된 버킷을 입력한다 .
  3. **파일 이름 설정**: 파일 이름은 단어 이름(Loop Over Items 노드에서 가져옴)을 활용하고, 확장자는 이미지 생성 노드에서 요청했던 포맷(예: jpg)을 붙여준다 .
  4. 테스트 결과, 파일이 S3에 업로드되고 **로케이션 주소(URL)**가 나오는 것을 확인한다 .


### 4.2. 오디오 생성 및 변수 설정 
![image]()
1. **오디오 생성**** (HTTP Request)**:
  1. 오디오는 상업적으로 이용하지 않는 경우 사용 가능한 **무료 ****TTS**** 제공 주소**를 활용한다 .
  2. HTTP Request 노드를 추가하고, 미리 준비된 URL에 영단어 입력 부분을 지우고 이전 노드(Loop Over Items)에서 가져온 **단어**를 변수로 넣어준다 .
  3. 테스트 결과, 오디오 주소가 잘 들어오는 것을 확인하며, 이 오디오 주소를 활용하여 단어 카드에 임베드할 예정이다 (별도 다운로드 불필요) .

2. **변수 설정**** (Set Node)**:
  1. 이미지 URL, 오디오 URL, 단어, 뜻 등 필요한 정보들을 변수로 정리하기 위해 **Set 노드**를 사용한다 .
  2. **오디오 URL**: 오디오 URL 변수명을 정하고 방금 만든 TTS 주소를 넣어준다 .
  3. **이미지 URL**: 이미지 URL 변수명을 정하고 S3에서 넘어온 로케이션 정보를 넣어준다 .
  4. **단어 및 뜻**: 'Word' 변수에 단어(벨트)를, 'Meaning' 변수에 뜻(의미)을 넣어준다 .
  5. 테스트 결과, 변수 설정이 잘 되었는지 확인하고 다음 단계로 진행한다 .


### 4.3. 노션 플립카드 임베드 준비 
![image]()
1. **플립카드 ****템플릿**** 확인**:
  1. 영단어 플립카드 임베드 템플릿을 활용하며, 이 템플릿은 뜻 넘기기, 이미지, 영단어, 의미, 오디오 TTS 기능을 포함한다 .
  2. 플립카드의 주소 창에 ?word=바나나, &meaning=바나나, &audio=오디오주소, &image=이미지주소 형태로 파라미터를 변경하면 데이터가 바뀌는 것을 확인한다 .
  3. 이 플립카드는 색상, 뒷면 색상, 텍스트 색상까지 모두 변경 가능하다 .


## 5. n8n 워크플로우 구축: 노션 플립카드 임베드 및 자동화 완성 


### 5.1. 플립카드 임베드 및 URL 인코딩 처리 
![image](https://resource-release.s3.ap-northeast-2.amazonaws.com/thumbnails/0fvXBIi6cyk/2393.jpg)
1. **노션**** 플립카드 임베드 (HTTP Request)**:
  1. 노션 블록에 플립카드를 집어넣기 위해 **HTTP Request** 노드를 사용한다 (노션 기본 노드에서는 제공하지 않음) .
  2. **메서드 변경**: 메서드를 **PATCH**로 변경해야 한다 .
  3. **URL 주소**: URL 주소는 블록스 URL 패스 뒤에 **블록 아이디**가 들어가야 한다 .
  1. 블록 아이디는 변수 설정 노드에서 미리 정리해 둔 '블록 아이디' 변수를 가져와 사용한다 .
  4. **인증 설정**: 노션 인증 세팅을 동일하게 진행한다 .
  5. **요청 본문 설정**: 인베드 요청 본문은 JSON 형태로 embed 타입과 url을 지정하는 형태를 띤다 .
  1. 플립카드의 크기를 조절하기 위해 URL에 &width=200 파라미터를 추가하여 크기를 줄인다 .
  2. URL 내의 단어, 뜻, 오디오, 이미지 파라미터에 변수 설정 노드에서 만든 **Word, Meaning, Audio URL, Image URL** 변수를 넣어준다 .
  6. **에러 처리 (****URL 인코딩****)**: 테스트 시 URL 주소 안에 또 URL 주소를 넣는 문제로 에러가 발생하므로, **URL 인코딩**** 함수**를 사용하여 오디오와 이미지 부분만 처리한다 .
  7. **테스트 및 반복 연결**: URL 인코딩 후 테스트 결과, 벨트 이미지와 카드가 정확하게 변경된 것을 확인한다 .
  8. 이 과정을 반복하기 위해 임베드 노드의 끝부분을 Loop Over Items 노드의 뒷부분에 다시 연결한다 .


### 5.2. 웹훅 트리거 설정 및 최종 테스트 
![image]()
1. **웹훅**** 노드 설정**:
  1. 노션 버튼을 눌러 시나리오를 실행하기 위해 **웹훅****(Webhook)** 노드를 만든다 .
  2. **메서드**: 버튼으로 실행하기 위해 메서드를 **POST**로 설정한다 .
  3. **인증 설정**: 웹훅 주소를 아무나 이용할 수 없도록 **Header Auth**를 선택하고, '플립카드 생성 인증'이라는 이름으로 인증키를 설정한다 .
  1. 네임에 'Authorization'을, 밸류에 비밀번호(예: 123456789)를 설정한다 .
  4. 노션 버튼의 웹훅 주소 설정 시, Authorization 키와 비밀번호를 입력하여 세팅을 완료한다 .
  5. 웹훅 노드를 워크플로우 맨 앞에 연결하고, 테스트 웹훅 주소를 복사하여 노션 버튼에 입력한다 .

2. **최종 실행 테스트**:
  1. n8n에서 테스트 워크플로우를 누르고 신호를 기다린 후, 노션의 '단어 카드 생성' 버튼을 클릭한다 .
  2. 실행 결과, 루프가 돌면서 노션 DB의 카드가 하나씩 자동으로 바뀌는 것을 확인한다 .
  3. 생성된 카드의 TTS 및 이미지 퀄리티를 확인하며, 일부 무료 TTS의 오류는 유료 TTS로 교체하면 해결 가능하다고 언급한다 .


### 5.3. 노션 DB 업데이트 및 조건부 생성 추가 
![image]()
1. **생성 완료 상태 업데이트**:
  1. 생성이 완료된 단어의 상태를 '생성 완료'로 바꾸기 위해 **Update Database Page** 노드를 추가한다 .
  2. 업데이트 대상을 'By ID'로 설정하고, Loop Over Items 노드에서 가져온 **아이디 값**을 입력한다 .
  3. '상태' 속성을 선택하고 값을 **'생성 완료'**로 변경하도록 설정한다 .
  4. 테스트 결과, 상태가 '생성 완료'로 잘 업데이트되는 것을 확인한다 .

2. **이미지/오디오 URL 기록**:
  1. 한 번 생성된 이미지와 오디오는 다시 생성할 필요가 없으므로, 해당 URL을 노션 DB에 기록한다 .
  2. Update 노드에 '이미지' 속성을 추가하고, 변수 설정에서 가져온 **이미지 URL**을 넣어준다 .
  3. '오디오' 속성을 추가하고, 변수 설정에서 가져온 **오디오 URL**을 넣어준다 .
  4. 테스트 결과, 이미지와 오디오 URL이 노션 DB에 잘 들어간 것을 확인한다 .

3. **조건부 ****이미지 생성**** (이미지 존재 여부 확인)**:
  1. 이미지 생성은 부하가 크므로, 이미 이미지 파일이 존재하는지 확인하는 **조건부 처리**를 추가한다 .
  2. **IF 노드**를 사용하여 Loop Over Items 노드에서 가져온 이미지 파일의 **길이(Length)**가 0보다 큰지(즉, 이미지가 존재하는지) 테스트한다 .
  3. **분기 처리**:
  1. **이미지가 존재하지 않을 때**: 이미지 생성, 다운로드, S3 업로드 과정을 거치도록 연결한다 .
  2. **이미지가 존재할 때**: 모든 생성 과정을 뛰어넘고 바로 변수 설정 노드로 이동하여, 기존에 있던 이미지 URL을 가져와 사용하도록 변수 설정을 별도로 만든다 .
  4. **최종 테스트 및 에러 수정**:
  1. 웹훅을 다시 켜고 생성 상태를 '생성 전'으로 바꾼 후 테스트를 진행한다 .
  2. 테스트 중 발생한 에러(변수 설정 노드 변경으로 인한 경로 오류)를 해결하기 위해, 조건 분기된 두 경로(이미지 생성 경로와 기존 이미지 활용 경로) 모두에 변수 설정 및 플립카드 임베드 노드를 복제하여 각각 처리하도록 수정한다 .
  3. 이미지 URL 경로 오류 등 추가적인 에러를 수정하고 최종적으로 워크플로우를 실행한다 .
  5. **결과**: 최종 실행 결과, 이미지와 오디오가 하나씩 잘 들어오며 영어 플래시 카드가 자동으로 생성되는 것을 확인하며 마무리한다 .

4. **마무리**:
  1. 이 자동화 시스템을 통해 높은 퀄리티의 콘텐츠를 자동으로 만들 수 있으며, 더 많은 교육 콘텐츠에 응용하여 확장할 수 있다 .
  2. 시청자들의 문의나 정보 요청은 댓글을 통해 받겠다고 안내하며 영상을 마친다 .

